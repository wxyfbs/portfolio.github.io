<!doctype html>
<html lang="ro">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ScootUp v1.2.41</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
<style>
body{transition:background-color 0.6s,color 0.6s;}
#map{height:400px;border-radius:1rem;}
.card{@apply rounded-3xl shadow-2xl border bg-white transition-all;}
.btn-main,.btn-admin{@apply px-4 py-2 rounded-2xl font-semibold text-white transition-colors;}
.btn-main{@apply bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500;}
.btn-admin{@apply bg-gradient-to-r from-emerald-500 via-lime-400 to-emerald-600;}
#adminPanel,#settingsPanel,#creditsPanel{display:none;margin-top:1rem;}
.panel-section{@apply mt-4 p-4 border rounded-xl bg-gray-50;display:none;}
.panel-item{@apply mb-2 p-2 border-b;}
body.dark{@apply bg-gray-900 text-gray-100;}
body.dark .card{@apply bg-gray-800 border-gray-700 text-gray-100;}
body.dark .panel-section{@apply bg-gray-700 border-gray-600;}
</style>
</head>
<body class="bg-gradient-to-r from-indigo-50 via-purple-50 to-pink-50 text-gray-900">
<div class="max-w-7xl mx-auto p-6">
<header class="flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6 gap-4">
<h1 class="text-3xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600">⚡ ScootUp v1.2.41</h1>
<div class="flex gap-3">
<button class="btn-main" onclick="togglePanel('settingsPanel')">Setări</button>
<button class="btn-main" onclick="togglePanel('creditsPanel')">Credits</button>
</div>
</header>

<section id="settingsPanel" class="card p-4">
<h2 class="text-xl font-bold mb-3">Setări</h2>
<div class="flex flex-col gap-3">
<button class="btn-main" onclick="toggleTheme()">Schimbă Tema</button>
</div>
</section>

<section id="creditsPanel" class="card p-4">
<h2 class="text-xl font-bold mb-3">Credits</h2>
<div class="panel-item"><strong>Dezvoltatori:</strong> –</div>
<div class="panel-item"><strong>GUI Designers:</strong> –</div>
<div class="panel-item"><strong>Versiune:</strong> 1.2.41</div>
</section>

<section class="grid md:grid-cols-3 gap-6 mb-6">
<div class="card p-4 md:col-span-1">
<h2 class="text-lg font-semibold mb-3">Profilul tău</h2>
<div class="space-y-3">
<input id="nameInput" class="w-full border rounded-xl p-2" placeholder="Nume afișat" />
<textarea id="descInput" class="w-full border rounded-xl p-2" rows="3" placeholder="Descriere..."></textarea>
<input id="photoInput" type="file" accept="image/*" multiple class="block w-full text-sm" />
<div id="photoGrid" class="grid grid-cols-3 gap-2 mt-2"></div>
<button id="saveProfileBtn" class="btn-main w-full mt-3">Salvează profilul</button>
<button onclick="clearPhotos()" class="btn-main w-full mt-2 text-sm">Șterge toate pozele</button>
</div>
</div>

<div class="card p-4 md:col-span-2">
<h2 class="text-lg font-semibold mb-3">Locația ta live & Întâlniri</h2>
<div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3">
<div><div class="text-sm">Lat: <span id="lat">—</span></div><div class="text-sm">Lng: <span id="lng">—</span></div><div class="text-xs opacity-70">Actualizat: <span id="locUpdated">—</span></div></div>
<div class="flex items-center gap-3">
<label class="inline-flex items-center gap-2 text-sm"><input id="shareToggle" type="checkbox" class="w-4 h-4" /> Partajează locația</label>
<a id="mapsLink" href="#" target="_blank" class="text-sm text-indigo-700 underline opacity-80">Deschide în Maps</a>
<button id="scootBtn" class="btn-main">🚀 Scoot Up</button>
</div>
</div>
<div id="map" class="mt-3"></div>
<div class="mt-3">
<h3 class="font-semibold mb-1">Creează Întâlnire</h3>
<input id="hangoutName" class="border rounded-xl p-2 w-full mb-2" placeholder="Nume întâlnire" />
<button id="createHangoutBtn" class="btn-main w-full">Adaugă Întâlnire</button>
<button onclick="clearHangoutMarker()" class="btn-main w-full mt-1 text-sm">Șterge selecția</button>
</div>
</div>
</section>

<section id="adminPanel" class="card p-6 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 text-white shadow-2xl border-2 border-indigo-700 rounded-3xl">
<h2 class="text-2xl font-bold mb-4">⚠️ Panou Admin</h2>
<div class="flex flex-wrap gap-3">
<button class="btn-admin" onclick="toggleSection('usersSection')">Utilizatori</button>
<button class="btn-admin" onclick="toggleSection('meetupsSection')">Întâlniri</button>
</div>
<div id="usersSection" class="panel-section"></div>
<div id="meetupsSection" class="panel-section"></div>
</section>

<footer class="mt-8 text-xs opacity-60">Test local – experiență unică</footer>
</div>

<script>
const adminPanel=document.getElementById('adminPanel'),
settingsPanel=document.getElementById('settingsPanel'),
creditsPanel=document.getElementById('creditsPanel');

function togglePanel(p){[settingsPanel,creditsPanel].forEach(el=>{if(el.id!==p)el.style.display='none';});let el=document.getElementById(p);el.style.display=(el.style.display==='block')?'none':'block';}
function toggleTheme(){document.body.classList.toggle('dark');}
function toggleSection(id){document.querySelectorAll('.panel-section').forEach(s=>s.style.display='none');document.getElementById(id).style.display='block';}

// Profil
const nameInput=document.getElementById('nameInput'),
descInput=document.getElementById('descInput'),
photoInput=document.getElementById('photoInput'),
photoGrid=document.getElementById('photoGrid'),
saveBtn=document.getElementById('saveProfileBtn');

function addPhoto(src){const img=document.createElement('img');img.src=src;img.className='rounded-xl';photoGrid.appendChild(img);}
function clearPhotos(){localStorage.removeItem('photos');photoGrid.innerHTML='';}

window.addEventListener('load',()=>{
  const savedName=localStorage.getItem('name');
  const savedDesc=localStorage.getItem('desc');
  const savedPhotos=JSON.parse(localStorage.getItem('photos')||'[]');
  if(savedName) nameInput.value=savedName;
  if(savedDesc) descInput.value=savedDesc;
  if(savedPhotos.length) savedPhotos.forEach(src=>addPhoto(src));
  checkAdmin();
});

// Salvează profil
saveBtn.addEventListener('click',()=>{
  localStorage.setItem('name',nameInput.value);
  localStorage.setItem('desc',descInput.value);
  const files=photoInput.files;
  const photos=JSON.parse(localStorage.getItem('photos')||'[]');
  if(files.length){
    Array.from(files).forEach(f=>{
      const r=new FileReader();
      r.onload=e=>{photos.push(e.target.result); addPhoto(e.target.result); localStorage.setItem('photos',JSON.stringify(photos));};
      r.readAsDataURL(f);
    });
  }
  checkAdmin();
});

// Admin panel
function checkAdmin(){
  const name=nameInput.value.trim().toLowerCase();
  if(name==='radu'||name==='admin'){
    adminPanel.style.display='block';
    renderUsers();
    renderHangouts();
  } else adminPanel.style.display='none';
}

function renderUsers(){
  const userDiv=document.getElementById('usersSection');
  userDiv.innerHTML='';
  const name=localStorage.getItem('name')||'N/A';
  const desc=localStorage.getItem('desc')||'N/A';
  const photos=JSON.parse(localStorage.getItem('photos')||'[]');
  const div=document.createElement('div');
  div.className='panel-item';
  div.innerHTML=`<strong>${name}</strong><br>${desc}<br>`;
  photos.forEach(src=>{const img=document.createElement('img');img.src=src;img.className='rounded-xl w-16 h-16 mr-1 inline-block';div.appendChild(img);});
  userDiv.appendChild(div);
}

// Map
let map=L.map('map').setView([0,0],2);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom:19}).addTo(map);
const userMarker=L.marker([0,0]).addTo(map);
let hangoutMarker = null;

function updateLocation(){
  if(document.getElementById('shareToggle').checked && navigator.geolocation){
    navigator.geolocation.getCurrentPosition(pos=>{
      const lat=pos.coords.latitude,lng=pos.coords.longitude;
      document.getElementById('lat').innerText=lat.toFixed(5);
      document.getElementById('lng').innerText=lng.toFixed(5);
      document.getElementById('locUpdated').innerText=new Date().toLocaleTimeString();
      userMarker.setLatLng([lat,lng]);
      map.setView([lat,lng],15);
    });
  }
}
setInterval(updateLocation,3000);

// Hangouts
let hangouts=JSON.parse(localStorage.getItem('hangouts')||'[]');

function renderHangouts(){
  map.eachLayer(l=>{if(l.options && l.options.hangoutMarker) map.removeLayer(l);});
  const listDiv=document.getElementById('meetupsSection');
  listDiv.innerHTML='';
  hangouts.forEach((h,i)=>{
    L.marker([h.lat,h.lng],{hangoutMarker:true}).addTo(map).bindPopup(h.name);
    const div=document.createElement('div');
    div.className='panel-item';
    div.innerHTML=`<strong>${h.name}</strong> Lat:${h.lat}, Lng:${h.lng} <button onclick="deleteHangout(${i})" class="btn-admin text-sm bg-red-600">Șterge</button>`;
    listDiv.appendChild(div);
  });
}

function deleteHangout(i){hangouts.splice(i,1);localStorage.setItem('hangouts',JSON.stringify(hangouts));renderHangouts();}

// Creează hangout din input sau click pe map
document.getElementById('createHangoutBtn').addEventListener('click',()=>{
  const name=document.getElementById('hangoutName').value;
  if(!hangoutMarker){alert('Selectează o locație pe hartă!'); return;}
  const {lat,lng}=hangoutMarker.getLatLng();
  if(name){hangouts.push({name,lat,lng}); localStorage.setItem('hangouts',JSON.stringify(hangouts)); renderHangouts(); hangoutMarker=null; document.getElementById('hangoutName').value='';}
});

// Click pe map pentru hangout
map.on('click',function(e){
  const {lat,lng}=e.latlng;
  if(hangoutMarker) map.removeLayer(hangoutMarker);
  hangoutMarker=L.marker([lat,lng],{hangoutMarker:true}).addTo(map);
});

function clearHangoutMarker(){
  if(hangoutMarker) map.removeLayer(hangoutMarker);
  hangoutMarker=null;
}
renderHangouts();
</script>
</body>
</html>
